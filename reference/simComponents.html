<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Simulate components of continuous variables of population data — simComponents • simPop</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate components of continuous variables of population data — simComponents"><meta property="og:description" content="Simulate components of continuous variables of population data by resampling
fractions from survey data. The continuous variable to be split and any
categorical conditioning variables need to be simulated beforehand."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">simPop</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/statistikat/simPop/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Simulate components of continuous variables of population data</h1>
    <small class="dont-index">Source: <a href="https://github.com/statistikat/simPop/blob/HEAD/R/simComponents.R" class="external-link"><code>R/simComponents.R</code></a></small>
    <div class="hidden name"><code>simComponents.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Simulate components of continuous variables of population data by resampling
fractions from survey data. The continuous variable to be split and any
categorical conditioning variables need to be simulated beforehand.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">simComponents</span><span class="op">(</span></span>
<span>  <span class="va">simPopObj</span>,</span>
<span>  total <span class="op">=</span> <span class="st">"netIncome"</span>,</span>
<span>  components <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"py010n"</span>, <span class="st">"py050n"</span>, <span class="st">"py090n"</span>, <span class="st">"py100n"</span>, <span class="st">"py110n"</span>, <span class="st">"py120n"</span>, <span class="st">"py130n"</span>,</span>
<span>    <span class="st">"py140n"</span><span class="op">)</span>,</span>
<span>  conditional <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">getCatName</span><span class="op">(</span><span class="va">total</span><span class="op">)</span>, <span class="st">"pl030"</span><span class="op">)</span>,</span>
<span>  replaceEmpty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sequential"</span>, <span class="st">"min"</span><span class="op">)</span>,</span>
<span>  <span class="va">seed</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>simPopObj</dt>
<dd><p>a <code><a href="simPopObj-class.html">simPopObj</a></code>-object.</p></dd>


<dt>total</dt>
<dd><p>a character string specifying the continuous variable of dataP
that should be split into components. Currently, only one variable can be
split at a time.</p></dd>


<dt>components</dt>
<dd><p>a character vector specifying the components in
<code>dataS</code> that should be simulated for the population data.</p></dd>


<dt>conditional</dt>
<dd><p>an optional character vector specifying categorical
conditioning variables for resampling. The fractions occurring in
<code>dataS</code> are then drawn from the respective subsets defined by these
variables.</p></dd>


<dt>replaceEmpty</dt>
<dd><p>a character string; if <code>conditional</code> specifies at
least two conditioning variables, this determines how replacement cells for
empty subsets in the sample are obtained. If <code>"sequential"</code>, the
conditioning variables are browsed sequentially such that replacement cells
have the same value in one conditioning variable and minimum Manhattan
distance in the other conditioning variables. If no such cells exist,
replacement cells with minimum overall Manhattan distance are selected. The
latter is always done if this is <code>"min"</code> or only one conditioning
variable is used.</p></dd>


<dt>seed</dt>
<dd><p>optional; an integer value to be used as the seed of the random
number generator, or an integer vector containing the state of the random
number generator to be restored.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An object of class <code><a href="simPopObj-class.html">simPopObj</a></code> containing survey
data as well as the simulated population data including the components of
the continuous variable specified by <code>total</code> and <code>components</code>.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>The basic household structure, any categorical conditioning variables
and the continuous variable to be split need to be simulated beforehand with
the functions <code><a href="simStructure.html">simStructure</a></code>, <code><a href="simCategorical.html">simCategorical</a></code> and
<code><a href="simContinuous.html">simContinuous</a></code>.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>B. Meindl, M. Templ, A. Kowarik, O. Dupriez (2017) Simulation of Synthetic Populations for Survey Data Considering Auxiliary
Information. <em>Journal of Statistical Survey</em>, <strong>79</strong> (10), 1--38. <a href="https://doi.org/10.18637/jss.v079.i10" class="external-link">doi:10.18637/jss.v079.i10</a></p>
<p>A. Alfons, M. Templ (2011) Simulation of close-to-reality population data for household surveys with application to EU-SILC. 
<em>Statistical Methods &amp; Applications</em>, <strong>20</strong> (3), 383--407. <a href="https://doi.org/10.1080/02664763.2013.859237" class="external-link">doi:10.1080/02664763.2013.859237</a></p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="simStructure.html">simStructure</a></code>, <code><a href="simCategorical.html">simCategorical</a></code>,
<code><a href="simContinuous.html">simContinuous</a></code>, <code><a href="simEUSILC.html">simEUSILC</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Stefan Kraft and Andreas Alfons and Bernhard Meindl</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">eusilcS</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co">## approx. 20 seconds computation time</span></span></span>
<span class="r-in"><span><span class="va">inp</span> <span class="op">&lt;-</span> <span class="fu"><a href="specifyInput.html">specifyInput</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">eusilcS</span>, hhid<span class="op">=</span><span class="st">"db030"</span>, hhsize<span class="op">=</span><span class="st">"hsize"</span>,</span></span>
<span class="r-in"><span>  strata<span class="op">=</span><span class="st">"db040"</span>, weight<span class="op">=</span><span class="st">"db090"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">simPopObj</span> <span class="op">&lt;-</span> <span class="fu"><a href="simStructure.html">simStructure</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">inp</span>, method<span class="op">=</span><span class="st">"direct"</span>,</span></span>
<span class="r-in"><span>  basicHHvars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"rb090"</span>, <span class="st">"hsize"</span>, <span class="st">"pl030"</span>, <span class="st">"pb220a"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">simPopObj</span> <span class="op">&lt;-</span> <span class="fu"><a href="simContinuous.html">simContinuous</a></span><span class="op">(</span><span class="va">simPopObj</span>, additional <span class="op">=</span> <span class="st">"netIncome"</span>,</span></span>
<span class="r-in"><span>  regModel <span class="op">=</span> <span class="op">~</span><span class="va">rb090</span><span class="op">+</span><span class="va">hsize</span><span class="op">+</span><span class="va">pl030</span><span class="op">+</span><span class="va">pb220a</span><span class="op">+</span><span class="va">hsize</span>,</span></span>
<span class="r-in"><span>  method<span class="op">=</span><span class="st">"multinom"</span>, upper<span class="op">=</span><span class="fl">200000</span>, equidist<span class="op">=</span><span class="cn">FALSE</span>, nr_cpus<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># categorize net income for use as conditioning variable</span></span></span>
<span class="r-in"><span><span class="va">sIncome</span> <span class="op">&lt;-</span> <span class="fu"><a href="manageSimPopObj.html">manageSimPopObj</a></span><span class="op">(</span><span class="va">simPopObj</span>, var<span class="op">=</span><span class="st">"netIncome"</span>, sample<span class="op">=</span><span class="cn">TRUE</span>, set<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sWeight</span> <span class="op">&lt;-</span> <span class="fu"><a href="manageSimPopObj.html">manageSimPopObj</a></span><span class="op">(</span><span class="va">simPopObj</span>, var<span class="op">=</span><span class="st">"rb050"</span>, sample<span class="op">=</span><span class="cn">TRUE</span>, set<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pIncome</span> <span class="op">&lt;-</span> <span class="fu"><a href="manageSimPopObj.html">manageSimPopObj</a></span><span class="op">(</span><span class="va">simPopObj</span>, var<span class="op">=</span><span class="st">"netIncome"</span>, sample<span class="op">=</span><span class="cn">FALSE</span>, set<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">breaks</span> <span class="op">&lt;-</span> <span class="fu"><a href="getBreaks.html">getBreaks</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">sIncome</span><span class="op">)</span>, w<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">sWeight</span><span class="op">)</span>, upper<span class="op">=</span><span class="cn">Inf</span>, equidist<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">simPopObj</span> <span class="op">&lt;-</span> <span class="fu"><a href="manageSimPopObj.html">manageSimPopObj</a></span><span class="op">(</span><span class="va">simPopObj</span>, var<span class="op">=</span><span class="st">"netIncomeCat"</span>, sample<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  set<span class="op">=</span><span class="cn">TRUE</span>, values<span class="op">=</span><span class="fu"><a href="getCat.html">getCat</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">sIncome</span><span class="op">)</span>, <span class="va">breaks</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">simPopObj</span> <span class="op">&lt;-</span> <span class="fu"><a href="manageSimPopObj.html">manageSimPopObj</a></span><span class="op">(</span><span class="va">simPopObj</span>, var<span class="op">=</span><span class="st">"netIncomeCat"</span>, sample<span class="op">=</span><span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  set<span class="op">=</span><span class="cn">TRUE</span>, values<span class="op">=</span><span class="fu"><a href="getCat.html">getCat</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">pIncome</span><span class="op">)</span>, <span class="va">breaks</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># simulate net income components</span></span></span>
<span class="r-in"><span><span class="va">simPopObj</span> <span class="op">&lt;-</span> <span class="fu">simComponents</span><span class="op">(</span>simPopObj<span class="op">=</span><span class="va">simPopObj</span>, total<span class="op">=</span><span class="st">"netIncome"</span>,</span></span>
<span class="r-in"><span>  components<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"py010n"</span>,<span class="st">"py050n"</span>,<span class="st">"py090n"</span>,<span class="st">"py100n"</span>,<span class="st">"py110n"</span>,<span class="st">"py120n"</span>,<span class="st">"py130n"</span>,<span class="st">"py140n"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  conditional <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"netIncomeCat"</span>, <span class="st">"pl030"</span><span class="op">)</span>, replaceEmpty <span class="op">=</span> <span class="st">"sequential"</span>, seed<span class="op">=</span><span class="fl">1</span> <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">simPopObj</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Matthias Templ, Alexander Kowarik, Bernhard Meindl, Andreas Alfons.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

