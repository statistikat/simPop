<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>add known margins/totals — addKnownMargins • simPop</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="add known margins/totals — addKnownMargins"><meta property="og:description" content="add known margins/totals for a combination of variables for the population
to an object of class simPopObj."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">simPop</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/statistikat/simPop/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>add known margins/totals</h1>
    <small class="dont-index">Source: <a href="https://github.com/statistikat/simPop/blob/HEAD/R/addKnownMargins.R" class="external-link"><code>R/addKnownMargins.R</code></a></small>
    <div class="hidden name"><code>addKnownMargins.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>add known margins/totals for a combination of variables for the population
to an object of class <code><a href="simPopObj-class.html">simPopObj</a></code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">addKnownMargins</span><span class="op">(</span><span class="va">inp</span>, <span class="va">margins</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>inp</dt>
<dd><p>a <code>simPopObj</code> containing population and household survey
data as well as optionally margins in standardized format.</p></dd>
<dt>margins</dt>
<dd><p>a <code>data.frame</code> containing for a combination of unique
variable levels for n-variables the number of known occurences in the
population. The numbers must be listed in the last column of data.frame
'margins' while the characteristics must be listed in the first 'n' columns.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>an object of class <code><a href="simPopObj-class.html">simPopObj</a></code> with updated slot
'table'.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The function takes a data.frame containing known marginals/totals for a some
variables that must exist in the population (stored in slot 'pop' of input
object 'inp') and updates slot 'table' of the input object. This slot
finally contains the known totals.</p>
<p>households are drawn from the data and new ID's are generated for the new
households.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>M. Templ, B. Meindl, A. Kowarik, A. Alfons, O. Dupriez (2017) Simulation of Synthetic Populations for Survey Data Considering Auxiliary
Information. <em>Journal of Statistical Survey</em>, <strong>79</strong> (10), 1--38. doi: <a href="https://doi.org/10.18637/jss.v079.i10" class="external-link">10.18637/jss.v079.i10</a></p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Bernhard Meindl</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">eusilcS</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">eusilcP</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># \donttest{</span></span>
<span class="r-in"><span class="co">## approx. 20 seconds computation time</span></span>
<span class="r-in"><span class="va">inp</span> <span class="op">&lt;-</span> <span class="fu"><a href="specifyInput.html">specifyInput</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">eusilcS</span>, hhid<span class="op">=</span><span class="st">"db030"</span>, hhsize<span class="op">=</span><span class="st">"hsize"</span>, strata<span class="op">=</span><span class="st">"db040"</span>, weight<span class="op">=</span><span class="st">"db090"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">inp</span> <span class="op">&lt;-</span> <span class="fu"><a href="simStructure.html">simStructure</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">inp</span>, method<span class="op">=</span><span class="st">"direct"</span>, basicHHvars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"rb090"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">inp</span> <span class="op">&lt;-</span> <span class="fu"><a href="simCategorical.html">simCategorical</a></span><span class="op">(</span><span class="va">inp</span>, additional<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pl030"</span>, <span class="st">"pb220a"</span><span class="op">)</span>, method<span class="op">=</span><span class="st">"multinom"</span>,nr_cpus<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">margins</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span></span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/stats/xtabs.html" class="external-link">xtabs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">eusilcP</span><span class="op">)</span><span class="op">)</span> <span class="op">~</span> <span class="va">eusilcP</span><span class="op">$</span><span class="va">region</span> <span class="op">+</span> <span class="va">eusilcP</span><span class="op">$</span><span class="va">gender</span> <span class="op">+</span> <span class="va">eusilcP</span><span class="op">$</span><span class="va">citizenship</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">margins</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"db040"</span>, <span class="st">"rb090"</span>, <span class="st">"pb220a"</span>, <span class="st">"freq"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">inp</span> <span class="op">&lt;-</span> <span class="fu">addKnownMargins</span><span class="op">(</span><span class="va">inp</span>, <span class="va">margins</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">inp</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Formal class 'simPopObj' [package "simPop"] with 4 slots</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..@ sample     :Formal class 'dataObj' [package "simPop"] with 7 slots</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. ..@ data        :Classes ‘data.table’ and 'data.frame':	11725 obs. of  19 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ db030    : int [1:11725] 1 1 2 3 4 4 4 5 5 5 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ hsize    : int [1:11725] 2 2 1 1 3 3 3 5 5 5 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ db040    : Factor w/ 9 levels "Burgenland","Carinthia",..: 4 4 7 5 7 7 7 4 4 4 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ age      : int [1:11725] 72 66 56 67 70 46 37 41 35 9 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ rb090    : Factor w/ 2 levels "male","female": 1 2 2 2 2 1 1 1 2 2 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ pl030    : Factor w/ 7 levels "1","2","3","4",..: 5 5 2 5 5 3 1 1 3 NA ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ pb220a   : Factor w/ 3 levels "AT","EU","Other": 1 1 1 1 1 1 3 1 1 NA ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ netIncome: num [1:11725] 22675 16999 19274 13319 14366 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ py010n   : num [1:11725] 0 0 19274 0 0 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ py050n   : num [1:11725] 0 0 0 0 0 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ py090n   : num [1:11725] 0 0 0 0 0 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ py100n   : num [1:11725] 22675 0 0 13319 14366 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ py110n   : num [1:11725] 0 0 0 0 0 0 0 0 0 NA ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ py120n   : num [1:11725] 0 0 0 0 0 0 0 0 0 NA ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ py130n   : num [1:11725] 0 16999 0 0 0 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ py140n   : num [1:11725] 0 0 0 0 0 0 0 0 0 NA ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ db090    : num [1:11725] 7.82 7.82 8.79 8.11 7.51 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ rb050    : num [1:11725] 7.82 7.82 8.79 8.11 7.51 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ pid      : chr [1:11725] "1.1" "1.2" "2.1" "3.1" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..- attr(*, "sorted")= chr [1:2] "db030" "pid"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. ..@ hhid        : chr "db030"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. ..@ pid         : chr "pid"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. ..@ hhsize      : chr "hsize"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. ..@ weight      : chr "db090"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. ..@ strata      : chr "db040"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. ..@ ispopulation: logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..@ table      :Classes ‘data.table’ and 'data.frame':	54 obs. of  4 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ db040 : chr [1:54] "Burgenland" "Burgenland" "Burgenland" "Burgenland" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ rb090 : chr [1:54] "male" "male" "male" "female" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ pb220a: chr [1:54] "AT" "EU" "Other" "AT" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ N     : num [1:54] 797 26 10 821 29 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..@ pop        :Formal class 'dataObj' [package "simPop"] with 7 slots</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. ..@ data        :Classes ‘data.table’ and 'data.frame':	81838 obs. of  9 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ db030 : int [1:81838] 1 2 3 4 5 6 7 8 9 10 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ hsize : int [1:81838] 1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ db040 : Factor w/ 9 levels "Burgenland","Carinthia",..: 1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ age   : int [1:81838] 53 70 82 37 74 78 43 70 75 74 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ rb090 : Factor w/ 2 levels "male","female": 2 1 2 1 2 2 1 1 1 2 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ pid   : chr [1:81838] "1.1" "2.1" "3.1" "4.1" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ weight: num [1:81838] 1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ pl030 : Factor w/ 7 levels "1","2","3","4",..: 2 5 5 1 5 5 1 5 5 5 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..$ pb220a: Factor w/ 3 levels "AT","EU","Other": 1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. .. ..- attr(*, "sorted")= chr "db030"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. ..@ hhid        : chr "db030"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. ..@ pid         : chr "pid"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. ..@ hhsize      : chr "hsize"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. ..@ weight      : chr "weight"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. ..@ strata      : chr "db040"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. .. ..@ ispopulation: logi TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..@ basicHHvars: chr [1:2] "age" "rb090"</span>
<span class="r-in"><span class="co"># }</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Matthias Templ, Alexander Kowarik, Bernhard Meindl, Andreas Alfons.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

