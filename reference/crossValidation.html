<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Simulate variables of population data by cross validation — crossValidation • simPop</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate variables of population data by cross validation — crossValidation"><meta property="og:description" content="Simulate variables of population data. The household structure
of the population data needs to be simulated beforehand."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">simPop</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/statistikat/simPop/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Simulate variables of population data by cross validation</h1>
    <small class="dont-index">Source: <a href="https://github.com/statistikat/simPop/blob/HEAD/R/crossValidation.R" class="external-link"><code>R/crossValidation.R</code></a></small>
    <div class="hidden name"><code>crossValidation.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Simulate variables of population data. The household structure
of the population data needs to be simulated beforehand.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">crossValidation</span><span class="op">(</span>
  <span class="va">simPopObj</span>,
  <span class="va">additionals</span>,
  <span class="va">hyper_param_grid</span>,
  fold <span class="op">=</span> <span class="fl">3</span>,
  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"xgboost"</span><span class="op">)</span>,
  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"categorical"</span><span class="op">)</span>,
  by <span class="op">=</span> <span class="st">"strata"</span>,
  regModel <span class="op">=</span> <span class="st">"available"</span>,
  nr_cpus <span class="op">=</span> <span class="fl">1</span>,
  verbose <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>simPopObj</dt>
<dd><p>a <code>simPopObj</code> containing population and household
survey data as well as optionally margins in standardized format.</p></dd>
<dt>additionals</dt>
<dd><p>a character vector specifying additional categorical
variables available in the sample object of <code>simPopObj</code> that should be
simulated for the population data.</p></dd>
<dt>hyper_param_grid</dt>
<dd><p>a grid which can contain model specific parameters which will be passed onto the function call for the respective model.</p></dd>
<dt>fold</dt>
<dd><p>the number of k in k-fold crossvalidation</p></dd>
<dt>method</dt>
<dd><p>a character string specifying the method to be used for
simulating the additional categorical variables. Accepted value at the moment
only 
<code>"xgboost"</code>  for using xgboost (implementation in package xgboost)</p></dd>
<dt>type</dt>
<dd><p>currently only "categorical" is implemented</p></dd>
<dt>by</dt>
<dd><p>defining which variable to use as split up variable of the estimation. Defaults to the strata variable.</p></dd>
<dt>regModel</dt>
<dd><p>allows to specify the variables or model that is used when
simulating additional categorical variables. The following choices are
available if different from NULL.</p><ul><li><p>'basic'only the basic
household variables (generated with <code><a href="simStructure.html">simStructure</a></code>) are used.</p></li>
<li><p>'available'all available variables (that are common in the sample and
the synthetic population such as previously generated varaibles) excluding
id-variables, strata variables and household sizes are used for the
modelling. This parameter should be used with care because all factors are
automatically used as factors internally.</p></li>
<li><p>formula-objectUsers may also
specify a specifiy formula (class 'formula') that will be used. Checks are
performed that all required variables are available.</p></li>
</ul><p>If method
'distribution' is used, it is only possible to specify a vector of length
one containing one of the choices described above.  If parameter 'regModel'
is NULL, only basic household variables are used in any case.</p></dd>
<dt>nr_cpus</dt>
<dd><p>if specified, an integer number defining the number of cpus
that should be used for parallel processing.</p></dd>
<dt>verbose</dt>
<dd><p>set to TRUE if additional print output should be shown.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>An object of class <code><a href="simPopObj-class.html">simPopObj</a></code> containing survey
data as well as the simulated population data including the categorical
variables specified by argument <code>additional</code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The number of cpus are selected automatically in the following manner. The
number of cpus is equal the number of strata. However, if the number of cpus
is less than the number of strata, the number of cpus - 1 is used by
default. This should be the best strategy, but the user can also overwrite
this decision.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>The basic household structure needs to be simulated beforehand with
the function <code><a href="simStructure.html">simStructure</a></code>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="simStructure.html">simStructure</a></code>, <code><a href="simRelation.html">simRelation</a></code>,
<code><a href="simContinuous.html">simContinuous</a></code>, <code><a href="simComponents.html">simComponents</a></code>, <code><a href="simCategorical.html">simCategorical</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Bernhard Meindl, Andreas Alfons, Stefan Kraft, Alexander Kowarik, Matthias Templ, Siro Fritzmann</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">eusilcS</span><span class="op">)</span> <span class="co"># load sample data</span></span>
<span class="r-in"><span class="co"># \donttest{</span></span>
<span class="r-in"><span class="co">## approx. 20 seconds computation time</span></span>
<span class="r-in"><span class="va">inp</span> <span class="op">&lt;-</span> <span class="fu"><a href="specifyInput.html">specifyInput</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">eusilcS</span>, hhid<span class="op">=</span><span class="st">"db030"</span>, hhsize<span class="op">=</span><span class="st">"hsize"</span>, strata<span class="op">=</span><span class="st">"db040"</span>, weight<span class="op">=</span><span class="st">"db090"</span><span class="op">)</span></span>
<span class="r-in"><span class="co">## in the following, nr_cpus are selected automatically</span></span>
<span class="r-in"><span class="va">simPop</span> <span class="op">&lt;-</span> <span class="fu"><a href="simStructure.html">simStructure</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">inp</span>, method<span class="op">=</span><span class="st">"direct"</span>, basicHHvars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"rb090"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>nrounds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span class="r-in">                    max_depth <span class="op">=</span> <span class="fl">10</span>,</span>
<span class="r-in">                    eta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="fl">0.5</span><span class="op">)</span>,</span>
<span class="r-in">                    eval_metric <span class="op">=</span> <span class="st">"mlogloss"</span>,</span>
<span class="r-in">                    stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">simPop</span> <span class="op">&lt;-</span> <span class="fu">crossValidation</span><span class="op">(</span><span class="va">simPop</span>, additionals<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pl030"</span>, <span class="st">"pb220a"</span><span class="op">)</span>,</span>
<span class="r-in">nr_cpus<span class="op">=</span><span class="fl">1</span>, hyper_param_grid <span class="op">=</span> <span class="va">grid</span><span class="op">)</span></span>
<span class="r-in"><span class="va">simPop</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -------------- </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> synthetic population  of size </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  81838 x 9 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> build from a sample of size </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11725 x 19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -------------- </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> variables in the population:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> db030,hsize,db040,age,rb090,pid,weight,pl030,pb220a</span>
<span class="r-in"><span class="co"># }</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Matthias Templ, Alexander Kowarik, Bernhard Meindl, Andreas Alfons.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

